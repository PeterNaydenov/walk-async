function cov_cd469je36(){var path="/Users/peternaydenov/Sites/git-walk/src/main.js";var hash="8952b8d746ad5ecaa618e91bc145fe0324c50290";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/peternaydenov/Sites/git-walk/src/main.js",statementMap:{"0":{start:{line:19,column:17},end:{line:19,column:36}},"1":{start:{line:21,column:19},end:{line:21,column:21}},"2":{start:{line:22,column:24},end:{line:22,column:30}},"3":{start:{line:23,column:15},end:{line:23,column:40}},"4":{start:{line:25,column:4},end:{line:36,column:9}},"5":{start:{line:27,column:32},end:{line:27,column:43}},"6":{start:{line:28,column:32},end:{line:28,column:86}},"7":{start:{line:29,column:32},end:{line:29,column:37}},"8":{start:{line:31,column:32},end:{line:31,column:43}},"9":{start:{line:32,column:32},end:{line:32,column:86}},"10":{start:{line:33,column:32},end:{line:33,column:37}},"11":{start:{line:35,column:32},end:{line:35,column:45}},"12":{start:{line:37,column:4},end:{line:37,column:50}},"13":{start:{line:37,column:37},end:{line:37,column:48}},"14":{start:{line:38,column:4},end:{line:38,column:17}},"15":{start:{line:44,column:4},end:{line:44,column:55}},"16":{start:{line:44,column:41},end:{line:44,column:55}},"17":{start:{line:45,column:4},end:{line:45,column:56}},"18":{start:{line:45,column:41},end:{line:45,column:56}},"19":{start:{line:46,column:4},end:{line:46,column:19}},"20":{start:{line:52,column:4},end:{line:52,column:67}},"21":{start:{line:59,column:24},end:{line:59,column:28}},"22":{start:{line:60,column:27},end:{line:60,column:31}},"23":{start:{line:62,column:4},end:{line:66,column:9}},"24":{start:{line:62,column:44},end:{line:62,column:66}},"25":{start:{line:63,column:9},end:{line:66,column:9}},"26":{start:{line:64,column:16},end:{line:64,column:41}},"27":{start:{line:65,column:16},end:{line:65,column:44}},"28":{start:{line:67,column:4},end:{line:67,column:42}},"29":{start:{line:75,column:41},end:{line:75,column:49}},"30":{start:{line:77,column:4},end:{line:78,column:43}},"31":{start:{line:77,column:29},end:{line:77,column:76}},"32":{start:{line:78,column:29},end:{line:78,column:43}},"33":{start:{line:80,column:4},end:{line:80,column:36}},"34":{start:{line:80,column:30},end:{line:80,column:36}},"35":{start:{line:82,column:15},end:{line:82,column:39}},"36":{start:{line:83,column:4},end:{line:102,column:14}},"37":{start:{line:84,column:33},end:{line:84,column:54}},"38":{start:{line:85,column:20},end:{line:93,column:25}},"39":{start:{line:86,column:36},end:{line:89,column:41}},"40":{start:{line:87,column:44},end:{line:87,column:67}},"41":{start:{line:88,column:44},end:{line:88,column:50}},"42":{start:{line:90,column:49},end:{line:90,column:101}},"43":{start:{line:91,column:36},end:{line:91,column:66}},"44":{start:{line:91,column:60},end:{line:91,column:66}},"45":{start:{line:92,column:36},end:{line:92,column:54}},"46":{start:{line:94,column:20},end:{line:97,column:24}},"47":{start:{line:95,column:28},end:{line:95,column:42}},"48":{start:{line:96,column:28},end:{line:96,column:126}},"49":{start:{line:98,column:20},end:{line:101,column:25}},"50":{start:{line:99,column:28},end:{line:99,column:42}},"51":{start:{line:100,column:28},end:{line:100,column:125}},"52":{start:{line:107,column:0},end:{line:107,column:21}}},fnMap:{"0":{name:"walk",decl:{start:{line:17,column:10},end:{line:17,column:14}},loc:{start:{line:17,column:36},end:{line:39,column:1}},line:17},"1":{name:"findType",decl:{start:{line:43,column:9},end:{line:43,column:17}},loc:{start:{line:43,column:24},end:{line:47,column:2}},line:43},"2":{name:"generateList",decl:{start:{line:51,column:10},end:{line:51,column:22}},loc:{start:{line:51,column:69},end:{line:53,column:1}},line:51},"3":{name:"readCallback",decl:{start:{line:57,column:9},end:{line:57,column:21}},loc:{start:{line:57,column:35},end:{line:68,column:1}},line:57},"4":{name:"copyObject",decl:{start:{line:72,column:9},end:{line:72,column:19}},loc:{start:{line:72,column:67},end:{line:103,column:1}},line:72},"5":{name:"(anonymous_5)",decl:{start:{line:83,column:19},end:{line:83,column:20}},loc:{start:{line:83,column:24},end:{line:102,column:13}},line:83}},branchMap:{"0":{loc:{start:{line:25,column:4},end:{line:36,column:9}},type:"switch",locations:[{start:{line:26,column:12},end:{line:29,column:37}},{start:{line:30,column:12},end:{line:33,column:37}},{start:{line:34,column:12},end:{line:35,column:45}}],line:25},"1":{loc:{start:{line:44,column:4},end:{line:44,column:55}},type:"if",locations:[{start:{line:44,column:4},end:{line:44,column:55}},{start:{line:44,column:4},end:{line:44,column:55}}],line:44},"2":{loc:{start:{line:45,column:4},end:{line:45,column:56}},type:"if",locations:[{start:{line:45,column:4},end:{line:45,column:56}},{start:{line:45,column:4},end:{line:45,column:56}}],line:45},"3":{loc:{start:{line:62,column:4},end:{line:66,column:9}},type:"if",locations:[{start:{line:62,column:4},end:{line:66,column:9}},{start:{line:62,column:4},end:{line:66,column:9}}],line:62},"4":{loc:{start:{line:63,column:9},end:{line:66,column:9}},type:"if",locations:[{start:{line:63,column:9},end:{line:66,column:9}},{start:{line:63,column:9},end:{line:66,column:9}}],line:63},"5":{loc:{start:{line:77,column:4},end:{line:78,column:43}},type:"if",locations:[{start:{line:77,column:4},end:{line:78,column:43}},{start:{line:77,column:4},end:{line:78,column:43}}],line:77},"6":{loc:{start:{line:80,column:4},end:{line:80,column:36}},type:"if",locations:[{start:{line:80,column:4},end:{line:80,column:36}},{start:{line:80,column:4},end:{line:80,column:36}}],line:80},"7":{loc:{start:{line:85,column:20},end:{line:93,column:25}},type:"if",locations:[{start:{line:85,column:20},end:{line:93,column:25}},{start:{line:85,column:20},end:{line:93,column:25}}],line:85},"8":{loc:{start:{line:86,column:36},end:{line:89,column:41}},type:"if",locations:[{start:{line:86,column:36},end:{line:89,column:41}},{start:{line:86,column:36},end:{line:89,column:41}}],line:86},"9":{loc:{start:{line:91,column:36},end:{line:91,column:66}},type:"if",locations:[{start:{line:91,column:36},end:{line:91,column:66}},{start:{line:91,column:36},end:{line:91,column:66}}],line:91},"10":{loc:{start:{line:94,column:20},end:{line:97,column:24}},type:"if",locations:[{start:{line:94,column:20},end:{line:97,column:24}},{start:{line:94,column:20},end:{line:97,column:24}}],line:94},"11":{loc:{start:{line:98,column:20},end:{line:101,column:25}},type:"if",locations:[{start:{line:98,column:20},end:{line:101,column:25}},{start:{line:98,column:20},end:{line:101,column:25}}],line:98}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0},b:{"0":[0,0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8952b8d746ad5ecaa618e91bc145fe0324c50290"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_cd469je36=function(){return actualCoverage;};}return actualCoverage;}cov_cd469je36();/**
 *     walk
 * 
 *     Alternative of deep-copy that provides much better control during creation of immutable 
 *     copies of javascript data structures. 
 *     Library is using 'generator functions'. If support for old browsers is required, 
 *     add a polyfill for 'generators'.
 * 
 *     History notes:
 *        - Development started on March 2nd, 2022
 *        - Published on GitHub for first time: March 4th, 2022
 *
 */function walk(origin,callback){cov_cd469je36().f[0]++;let type=(cov_cd469je36().s[0]++,findType(origin)),result,extend=(cov_cd469je36().s[1]++,[]),breadcrumbs=(cov_cd469je36().s[2]++,'root'),cb=(cov_cd469je36().s[3]++,readCallback(callback));cov_cd469je36().s[4]++;switch(type){case'array':cov_cd469je36().b[0][0]++;cov_cd469je36().s[5]++;result=[];cov_cd469je36().s[6]++;copyObject(origin,result,extend,cb,breadcrumbs);cov_cd469je36().s[7]++;break;case'object':cov_cd469je36().b[0][1]++;cov_cd469je36().s[8]++;result={};cov_cd469je36().s[9]++;copyObject(origin,result,extend,cb,breadcrumbs);cov_cd469je36().s[10]++;break;case'simple':cov_cd469je36().b[0][2]++;cov_cd469je36().s[11]++;return origin;}// switch type
cov_cd469je36().s[12]++;for(const plus of extend){cov_cd469je36().s[13]++;plus.next();}cov_cd469je36().s[14]++;return result;}// walk func.
function findType(x){cov_cd469je36().f[1]++;cov_cd469je36().s[15]++;if(x instanceof Array){cov_cd469je36().b[1][0]++;cov_cd469je36().s[16]++;return'array';}else{cov_cd469je36().b[1][1]++;}cov_cd469je36().s[17]++;if(typeof x==='object'){cov_cd469je36().b[2][0]++;cov_cd469je36().s[18]++;return'object';}else{cov_cd469je36().b[2][1]++;}cov_cd469je36().s[19]++;return'simple';}// findType func.
function*generateList(location,data,ex,callback,breadcrumbs){cov_cd469je36().f[2]++;cov_cd469je36().s[20]++;yield copyObject(data,location,ex,callback,breadcrumbs);}// generateList func.
function readCallback(callback){cov_cd469je36().f[3]++;let keyCallback=(cov_cd469je36().s[21]++,null),objectCallback=(cov_cd469je36().s[22]++,null);cov_cd469je36().s[23]++;if(typeof callback==='function'){cov_cd469je36().b[3][0]++;cov_cd469je36().s[24]++;keyCallback=callback;}else{cov_cd469je36().b[3][1]++;cov_cd469je36().s[25]++;if(callback instanceof Array){cov_cd469je36().b[4][0]++;cov_cd469je36().s[26]++;keyCallback=callback[0];cov_cd469je36().s[27]++;objectCallback=callback[1];}else{cov_cd469je36().b[4][1]++;}}cov_cd469je36().s[28]++;return[keyCallback,objectCallback];}// readCallback func.
function copyObject(obj,result,extend,callback,breadcrumbs){cov_cd469je36().f[4]++;let resource,[keyCallback,objectCallback]=(cov_cd469je36().s[29]++,callback);cov_cd469je36().s[30]++;if(objectCallback){cov_cd469je36().b[5][0]++;cov_cd469je36().s[31]++;resource=objectCallback(obj,breadcrumbs);}else{cov_cd469je36().b[5][1]++;cov_cd469je36().s[32]++;resource=obj;}cov_cd469je36().s[33]++;if(resource==null){cov_cd469je36().b[6][0]++;cov_cd469je36().s[34]++;return;}else{cov_cd469je36().b[6][1]++;}let keys=(cov_cd469je36().s[35]++,Object.keys(resource));cov_cd469je36().s[36]++;keys.forEach(k=>{cov_cd469je36().f[5]++;const type=(cov_cd469je36().s[37]++,findType(resource[k]));cov_cd469je36().s[38]++;if(type==='simple'){cov_cd469je36().b[7][0]++;cov_cd469je36().s[39]++;if(!keyCallback){cov_cd469je36().b[8][0]++;cov_cd469je36().s[40]++;result[k]=resource[k];cov_cd469je36().s[41]++;return;}else{cov_cd469je36().b[8][1]++;}let keyRes=(cov_cd469je36().s[42]++,keyCallback(resource[k],k,`${breadcrumbs}/${k}`));cov_cd469je36().s[43]++;if(keyRes==null){cov_cd469je36().b[9][0]++;cov_cd469je36().s[44]++;return;}else{cov_cd469je36().b[9][1]++;}cov_cd469je36().s[45]++;result[k]=keyRes;}else{cov_cd469je36().b[7][1]++;}cov_cd469je36().s[46]++;if(type==='object'){cov_cd469je36().b[10][0]++;cov_cd469je36().s[47]++;result[k]={};cov_cd469je36().s[48]++;extend.push(generateList(result[k],resource[k],extend,callback,`${breadcrumbs}/${k}`));}else{cov_cd469je36().b[10][1]++;}cov_cd469je36().s[49]++;if(type==='array'){cov_cd469je36().b[11][0]++;cov_cd469je36().s[50]++;result[k]=[];cov_cd469je36().s[51]++;extend.push(generateList(result[k],resource[k],extend,callback,`${breadcrumbs}/${k}`));}else{cov_cd469je36().b[11][1]++;}});}// copyObject func.
cov_cd469je36().s[52]++;module.exports=walk;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsid2FsayIsIm9yaWdpbiIsImNhbGxiYWNrIiwidHlwZSIsImZpbmRUeXBlIiwicmVzdWx0IiwiZXh0ZW5kIiwiYnJlYWRjcnVtYnMiLCJjYiIsInJlYWRDYWxsYmFjayIsImNvcHlPYmplY3QiLCJwbHVzIiwibmV4dCIsIngiLCJBcnJheSIsImdlbmVyYXRlTGlzdCIsImxvY2F0aW9uIiwiZGF0YSIsImV4Iiwia2V5Q2FsbGJhY2siLCJvYmplY3RDYWxsYmFjayIsIm9iaiIsInJlc291cmNlIiwia2V5cyIsIk9iamVjdCIsImZvckVhY2giLCJrIiwia2V5UmVzIiwicHVzaCIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiI2ck9BZVk7eUZBZFo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FHQyxRQUFTQSxDQUFBQSxJQUFULENBQWdCQyxNQUFoQixDQUF3QkMsUUFBeEIsQ0FBbUMsd0JBQ2hDLEdBQ01DLENBQUFBLElBQUkseUJBQUdDLFFBQVEsQ0FBR0gsTUFBSCxDQUFYLENBRFYsQ0FFTUksTUFGTixDQUdNQyxNQUFNLHlCQUFHLEVBQUgsQ0FIWixDQUlNQyxXQUFXLHlCQUFHLE1BQUgsQ0FKakIsQ0FLTUMsRUFBRSx5QkFBR0MsWUFBWSxDQUFHUCxRQUFILENBQWYsQ0FMUixDQURnQyx1QkFRaEMsT0FBU0MsSUFBVCxFQUNRLElBQUssT0FBTCxrREFDb0JFLE1BQU0sQ0FBRyxFQUFULENBRHBCLHVCQUVvQkssVUFBVSxDQUFHVCxNQUFILENBQVdJLE1BQVgsQ0FBbUJDLE1BQW5CLENBQTJCRSxFQUEzQixDQUErQkQsV0FBL0IsQ0FBVixDQUZwQix1QkFHb0IsTUFDcEIsSUFBSyxRQUFMLGtEQUNvQkYsTUFBTSxDQUFHLEVBQVQsQ0FEcEIsdUJBRW9CSyxVQUFVLENBQUdULE1BQUgsQ0FBV0ksTUFBWCxDQUFtQkMsTUFBbkIsQ0FBMkJFLEVB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R21CLENBQUUsRUFBdkMsQ0FBZCxDQUFWLENBTFMsd0JBTVQsR0FBS0MsTUFBTSxFQUFJLElBQWYsQ0FBd0IsMERBQU0sQ0FBOUIsZ0NBTlMsd0JBT1R0QixNQUFNLENBQUNxQixDQUFELENBQU4sQ0FBWUMsTUFBWixDQUNYLENBUkwsZ0NBRkksd0JBV0osR0FBS3hCLElBQUksR0FBSyxRQUFkLENBQXlCLG9EQUNqQkUsTUFBTSxDQUFDcUIsQ0FBRCxDQUFOLENBQVksRUFBWixDQURpQix3QkFFakJwQixNQUFNLENBQUNzQixJQUFQLENBQWNiLFlBQVksQ0FBR1YsTUFBTSxDQUFDcUIsQ0FBRCxDQUFULENBQWNKLFFBQVEsQ0FBQ0ksQ0FBRCxDQUF0QixDQUEyQnBCLE1BQTNCLENBQW1DSixRQUFuQyxDQUE4QyxHQUFFSyxXQUFZLElBQUdtQixDQUFFLEVBQWpFLENBQTFCLEVBQ0osQ0FISixpQ0FYSSx3QkFlSixHQUFLdkIsSUFBSSxHQUFLLE9BQWQsQ0FBd0Isb0RBQ2hCRSxNQUFNLENBQUNxQixDQUFELENBQU4sQ0FBWSxFQUFaLENBRGdCLHdCQUVoQnBCLE1BQU0sQ0FBQ3NCLElBQVAsQ0FBY2IsWUFBWSxDQUFFVixNQUFNLENBQUNxQixDQUFELENBQVIsQ0FBYUosUUFBUSxDQUFDSSxDQUFELENBQXJCLENBQTBCcEIsTUFBMUIsQ0FBa0NKLFFBQWxDLENBQTZDLEdBQUVLLFdBQVksSUFBR21CLENBQUUsRUFBaEUsQ0FBMUIsRUFDSCxDQUhMLGlDQUlQLENBbkJULEVBb0JILENBQUM7d0JBSUZHLE1BQU0sQ0FBQ0MsT0FBUCxDQUFpQjlCLElBQWpCIiwic291cmNlc0NvbnRlbnQiOlsiXG4vKipcbiAqICAgICB3YWxrXG4gKiBcbiAqICAgICBBbHRlcm5hdGl2ZSBvZiBkZWVwLWNvcHkgdGhhdCBwcm92aWRlcyBtdWNoIGJldHRlciBjb250cm9sIGR1cmluZyBjcmVhdGlvbiBvZiBpbW11dGFibGUgXG4gKiAgICAgY29waWVzIG9mIGphdmFzY3JpcHQgZGF0YSBzdHJ1Y3R1cmVzLiBcbiAqICAgICBMaWJyYXJ5IGlzIHVzaW5nICdnZW5lcmF0b3IgZnVuY3Rpb25zJy4gSWYgc3VwcG9ydCBmb3Igb2xkIGJyb3dzZXJzIGlzIHJlcXVpcmVkLCBcbiAqICAgICBhZGQgYSBwb2x5ZmlsbCBmb3IgJ2dlbmVyYXRvcnMnLlxuICogXG4gKiAgICAgSGlzdG9yeSBub3RlczpcbiAqICAgICAgICAtIERldmVsb3BtZW50IHN0YXJ0ZWQgb24gTWFyY2ggMm5kLCAyMDIyXG4gKiAgICAgICAgLSBQdWJsaXNoZWQgb24gR2l0SHViIGZvciBmaXJzdCB0aW1lOiBNYXJjaCA0dGgsIDIwMjJcbiAqXG4gKi9cblxuXG4gZnVuY3Rpb24gd2FsayAoIG9yaWdpbiwgY2FsbGJhY2sgKSB7XG4gICAgbGV0IFxuICAgICAgICAgIHR5cGUgPSBmaW5kVHlwZSAoIG9yaWdpbiApXG4gICAgICAgICwgcmVzdWx0XG4gICAgICAgICwgZXh0ZW5kID0gW11cbiAgICAgICAgLCBicmVhZGNydW1icyA9ICdyb290J1xuICAgICAgICAsIGNiID0gcmVhZENhbGxiYWNrICggY2FsbGJhY2sgKVxuICAgICAgICA7XG4gICAgc3dpdGNoICggdHlwZSApIHtcbiAgICAgICAgICAgIGNhc2UgJ2FycmF5JyAgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBbXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3B5T2JqZWN0ICggb3JpZ2luLCByZXN1bHQsIGV4dGVuZCwgY2IsIGJyZWFkY3J1bWJzIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIGNhc2UgJ29iamVjdCcgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSB7fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3B5T2JqZWN0ICggb3JpZ2luLCByZXN1bHQsIGV4dGVuZCwgY2IsIGJyZWFkY3J1bWJzIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIGNhc2UgJ3NpbXBsZScgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb3JpZ2luXG4gICAgICAgIH0gLy8gc3dpdGNoIHR5cGVcbiAgICBmb3IgKCBjb25zdCBwbHVzIG9mIGV4dGVuZCApIHsgICBwbHVzLm5leHQoKSB9XG4gICAgcmV0dXJuIHJlc3VsdFxufSAvLyB3YWxrIGZ1bmMuXG5cblxuXG5mdW5jdGlvbiBmaW5kVHlwZSAoIHggKSB7XG4gICAgaWYgKCB4IGluc3RhbmNlb2YgQXJyYXkgICAgICAgICAgICApIHJldHVybiAnYXJyYXknXG4gICAgaWYgKCB0eXBlb2YgeCA9PT0gJ29iamVjdCcgICAgICAgICApIHJldHVybiAnb2JqZWN0J1xuICAgIHJldHVybiAnc2ltcGxlJ1xuIH0gLy8gZmluZFR5cGUgZnVuYy5cblxuXG5cbmZ1bmN0aW9uKiBnZW5lcmF0ZUxpc3QgKCBsb2NhdGlvbiwgZGF0YSwgZXgsIGNhbGxiYWNrLCBicmVhZGNydW1icyApIHtcbiAgICB5aWVsZCBjb3B5T2JqZWN0ICggZGF0YSAsIGxvY2F0aW9uLCBleCwgY2FsbGJhY2ssIGJyZWFkY3J1bWJzICkgIFxufSAvLyBnZW5lcmF0ZUxpc3QgZnVuYy5cblxuXG5cbmZ1bmN0aW9uIHJlYWRDYWxsYmFjayAoIGNhbGxiYWNrICkge1xuICAgIGxldCBcbiAgICAgICAgICBrZXlDYWxsYmFjayA9IG51bGxcbiAgICAgICAgLCBvYmplY3RDYWxsYmFjayA9IG51bGxcbiAgICAgICAgO1xuICAgIGlmICggdHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nICkgICBrZXlDYWxsYmFjayA9IGNhbGxiYWNrXG4gICAgZWxzZSBpZiAoIGNhbGxiYWNrIGluc3RhbmNlb2YgQXJyYXkgKSB7XG4gICAgICAgICAgICAgICAga2V5Q2FsbGJhY2sgPSBjYWxsYmFja1swXVxuICAgICAgICAgICAgICAgIG9iamVjdENhbGxiYWNrID0gY2FsbGJhY2tbMV1cbiAgICAgICAgfVxuICAgIHJldHVybiBbIGtleUNhbGxiYWNrLCBvYmplY3RDYWxsYmFjayBdXG59IC8vIHJlYWRDYWxsYmFjayBmdW5jLlxuXG5cblxuZnVuY3Rpb24gY29weU9iamVjdCAoIG9iaiwgcmVzdWx0LCBleHRlbmQsIGNhbGxiYWNrLCBicmVhZGNydW1icyApIHtcbiAgICBsZXQgXG4gICAgICAgIHJlc291cmNlXG4gICAgICAsWyBrZXlDYWxsYmFjaywgb2JqZWN0Q2FsbGJhY2sgXSA9IGNhbGxiYWNrXG4gICAgICA7XG4gICAgaWYgKCBvYmplY3RDYWxsYmFjayApICAgIHJlc291cmNlID0gb2JqZWN0Q2FsbGJhY2sgKCBvYmosICBicmVhZGNydW1icyApXG4gICAgZWxzZSAgICAgICAgICAgICAgICAgICAgIHJlc291cmNlID0gb2JqXG5cbiAgICBpZiAoIHJlc291cmNlID09IG51bGwgKSAgIHJldHVyblxuXG4gICAgbGV0IGtleXMgPSBPYmplY3Qua2V5cyAoIHJlc291cmNlICk7XG4gICAga2V5cy5mb3JFYWNoICggayA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHR5cGUgPSBmaW5kVHlwZShyZXNvdXJjZVtrXSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICggdHlwZSA9PT0gJ3NpbXBsZScgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoICFrZXlDYWxsYmFjayApIHsgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRba10gPSByZXNvdXJjZVtrXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQga2V5UmVzID0ga2V5Q2FsbGJhY2sgKCByZXNvdXJjZVtrXSwgaywgYCR7YnJlYWRjcnVtYnN9LyR7a31gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgga2V5UmVzID09IG51bGwgKSAgIHJldHVyblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0W2tdID0ga2V5UmVzXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICggdHlwZSA9PT0gJ29iamVjdCcgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0W2tdID0ge31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHRlbmQucHVzaCAoIGdlbmVyYXRlTGlzdCAoIHJlc3VsdFtrXSwgcmVzb3VyY2Vba10sIGV4dGVuZCwgY2FsbGJhY2ssIGAke2JyZWFkY3J1bWJzfS8ke2t9YCApICAgKVxuICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICggdHlwZSA9PT0gJ2FycmF5JyApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRba10gPSBbXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dGVuZC5wdXNoICggZ2VuZXJhdGVMaXN0KCByZXN1bHRba10sIHJlc291cmNlW2tdLCBleHRlbmQsIGNhbGxiYWNrLCBgJHticmVhZGNydW1ic30vJHtrfWAgKSAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG59IC8vIGNvcHlPYmplY3QgZnVuYy5cblxuXG5cbm1vZHVsZS5leHBvcnRzID0gd2Fsa1xuXG5cbiJdfQ==