function cov_cd469je36(){var path="/Users/peternaydenov/Sites/git-walk/src/main.js";var hash="a664856fbb89f23209f4ea461f0368b0cb076720";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/peternaydenov/Sites/git-walk/src/main.js",statementMap:{"0":{start:{line:19,column:17},end:{line:19,column:36}},"1":{start:{line:21,column:19},end:{line:21,column:21}},"2":{start:{line:22,column:24},end:{line:22,column:30}},"3":{start:{line:23,column:15},end:{line:23,column:40}},"4":{start:{line:25,column:4},end:{line:36,column:9}},"5":{start:{line:27,column:32},end:{line:27,column:43}},"6":{start:{line:28,column:32},end:{line:28,column:86}},"7":{start:{line:29,column:32},end:{line:29,column:37}},"8":{start:{line:31,column:32},end:{line:31,column:43}},"9":{start:{line:32,column:32},end:{line:32,column:86}},"10":{start:{line:33,column:32},end:{line:33,column:37}},"11":{start:{line:35,column:32},end:{line:35,column:45}},"12":{start:{line:37,column:4},end:{line:37,column:50}},"13":{start:{line:37,column:37},end:{line:37,column:48}},"14":{start:{line:38,column:4},end:{line:38,column:17}},"15":{start:{line:44,column:4},end:{line:44,column:55}},"16":{start:{line:44,column:41},end:{line:44,column:55}},"17":{start:{line:45,column:4},end:{line:45,column:56}},"18":{start:{line:45,column:41},end:{line:45,column:56}},"19":{start:{line:46,column:4},end:{line:46,column:19}},"20":{start:{line:52,column:4},end:{line:52,column:67}},"21":{start:{line:59,column:24},end:{line:59,column:28}},"22":{start:{line:60,column:27},end:{line:60,column:31}},"23":{start:{line:62,column:4},end:{line:66,column:9}},"24":{start:{line:62,column:44},end:{line:62,column:66}},"25":{start:{line:63,column:9},end:{line:66,column:9}},"26":{start:{line:64,column:16},end:{line:64,column:41}},"27":{start:{line:65,column:16},end:{line:65,column:44}},"28":{start:{line:67,column:4},end:{line:67,column:42}},"29":{start:{line:74,column:19},end:{line:74,column:22}},"30":{start:{line:75,column:42},end:{line:75,column:50}},"31":{start:{line:78,column:15},end:{line:78,column:39}},"32":{start:{line:79,column:4},end:{line:115,column:14}},"33":{start:{line:81,column:33},end:{line:81,column:54}},"34":{start:{line:82,column:34},end:{line:82,column:45}},"35":{start:{line:84,column:20},end:{line:88,column:24}},"36":{start:{line:85,column:40},end:{line:85,column:96}},"37":{start:{line:86,column:40},end:{line:86,column:68}},"38":{start:{line:86,column:62},end:{line:86,column:68}},"39":{start:{line:87,column:40},end:{line:87,column:64}},"40":{start:{line:90,column:20},end:{line:98,column:25}},"41":{start:{line:91,column:36},end:{line:94,column:41}},"42":{start:{line:92,column:44},end:{line:92,column:60}},"43":{start:{line:93,column:44},end:{line:93,column:50}},"44":{start:{line:95,column:49},end:{line:95,column:94}},"45":{start:{line:96,column:36},end:{line:96,column:66}},"46":{start:{line:96,column:60},end:{line:96,column:66}},"47":{start:{line:97,column:36},end:{line:97,column:54}},"48":{start:{line:100,column:43},end:{line:100,column:72}},"49":{start:{line:101,column:38},end:{line:101,column:50}},"50":{start:{line:103,column:20},end:{line:108,column:24}},"51":{start:{line:104,column:46},end:{line:104,column:48}},"52":{start:{line:105,column:28},end:{line:106,column:85}},"53":{start:{line:105,column:64},end:{line:105,column:89}},"54":{start:{line:106,column:64},end:{line:106,column:85}},"55":{start:{line:107,column:28},end:{line:107,column:119}},"56":{start:{line:109,column:20},end:{line:114,column:25}},"57":{start:{line:110,column:45},end:{line:110,column:47}},"58":{start:{line:111,column:28},end:{line:112,column:84}},"59":{start:{line:111,column:64},end:{line:111,column:88}},"60":{start:{line:112,column:64},end:{line:112,column:84}},"61":{start:{line:113,column:28},end:{line:113,column:117}},"62":{start:{line:120,column:0},end:{line:120,column:21}}},fnMap:{"0":{name:"walk",decl:{start:{line:17,column:10},end:{line:17,column:14}},loc:{start:{line:17,column:36},end:{line:39,column:1}},line:17},"1":{name:"findType",decl:{start:{line:43,column:9},end:{line:43,column:17}},loc:{start:{line:43,column:24},end:{line:47,column:2}},line:43},"2":{name:"generateList",decl:{start:{line:51,column:10},end:{line:51,column:22}},loc:{start:{line:51,column:69},end:{line:53,column:1}},line:51},"3":{name:"readCallback",decl:{start:{line:57,column:9},end:{line:57,column:21}},loc:{start:{line:57,column:35},end:{line:68,column:1}},line:57},"4":{name:"copyObject",decl:{start:{line:72,column:9},end:{line:72,column:19}},loc:{start:{line:72,column:67},end:{line:116,column:1}},line:72},"5":{name:"(anonymous_5)",decl:{start:{line:79,column:19},end:{line:79,column:20}},loc:{start:{line:79,column:24},end:{line:115,column:13}},line:79}},branchMap:{"0":{loc:{start:{line:25,column:4},end:{line:36,column:9}},type:"switch",locations:[{start:{line:26,column:12},end:{line:29,column:37}},{start:{line:30,column:12},end:{line:33,column:37}},{start:{line:34,column:12},end:{line:35,column:45}}],line:25},"1":{loc:{start:{line:44,column:4},end:{line:44,column:55}},type:"if",locations:[{start:{line:44,column:4},end:{line:44,column:55}},{start:{line:44,column:4},end:{line:44,column:55}}],line:44},"2":{loc:{start:{line:45,column:4},end:{line:45,column:56}},type:"if",locations:[{start:{line:45,column:4},end:{line:45,column:56}},{start:{line:45,column:4},end:{line:45,column:56}}],line:45},"3":{loc:{start:{line:62,column:4},end:{line:66,column:9}},type:"if",locations:[{start:{line:62,column:4},end:{line:66,column:9}},{start:{line:62,column:4},end:{line:66,column:9}}],line:62},"4":{loc:{start:{line:63,column:9},end:{line:66,column:9}},type:"if",locations:[{start:{line:63,column:9},end:{line:66,column:9}},{start:{line:63,column:9},end:{line:66,column:9}}],line:63},"5":{loc:{start:{line:84,column:20},end:{line:88,column:24}},type:"if",locations:[{start:{line:84,column:20},end:{line:88,column:24}},{start:{line:84,column:20},end:{line:88,column:24}}],line:84},"6":{loc:{start:{line:84,column:25},end:{line:84,column:60}},type:"binary-expr",locations:[{start:{line:84,column:25},end:{line:84,column:42}},{start:{line:84,column:46},end:{line:84,column:60}}],line:84},"7":{loc:{start:{line:86,column:40},end:{line:86,column:68}},type:"if",locations:[{start:{line:86,column:40},end:{line:86,column:68}},{start:{line:86,column:40},end:{line:86,column:68}}],line:86},"8":{loc:{start:{line:90,column:20},end:{line:98,column:25}},type:"if",locations:[{start:{line:90,column:20},end:{line:98,column:25}},{start:{line:90,column:20},end:{line:98,column:25}}],line:90},"9":{loc:{start:{line:91,column:36},end:{line:94,column:41}},type:"if",locations:[{start:{line:91,column:36},end:{line:94,column:41}},{start:{line:91,column:36},end:{line:94,column:41}}],line:91},"10":{loc:{start:{line:96,column:36},end:{line:96,column:66}},type:"if",locations:[{start:{line:96,column:36},end:{line:96,column:66}},{start:{line:96,column:36},end:{line:96,column:66}}],line:96},"11":{loc:{start:{line:103,column:20},end:{line:108,column:24}},type:"if",locations:[{start:{line:103,column:20},end:{line:108,column:24}},{start:{line:103,column:20},end:{line:108,column:24}}],line:103},"12":{loc:{start:{line:105,column:28},end:{line:106,column:85}},type:"if",locations:[{start:{line:105,column:28},end:{line:106,column:85}},{start:{line:105,column:28},end:{line:106,column:85}}],line:105},"13":{loc:{start:{line:105,column:33},end:{line:105,column:59}},type:"binary-expr",locations:[{start:{line:105,column:33},end:{line:105,column:46}},{start:{line:105,column:50},end:{line:105,column:59}}],line:105},"14":{loc:{start:{line:109,column:20},end:{line:114,column:25}},type:"if",locations:[{start:{line:109,column:20},end:{line:114,column:25}},{start:{line:109,column:20},end:{line:114,column:25}}],line:109},"15":{loc:{start:{line:111,column:28},end:{line:112,column:84}},type:"if",locations:[{start:{line:111,column:28},end:{line:112,column:84}},{start:{line:111,column:28},end:{line:112,column:84}}],line:111},"16":{loc:{start:{line:111,column:33},end:{line:111,column:59}},type:"binary-expr",locations:[{start:{line:111,column:33},end:{line:111,column:46}},{start:{line:111,column:50},end:{line:111,column:59}}],line:111}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0},b:{"0":[0,0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a664856fbb89f23209f4ea461f0368b0cb076720"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_cd469je36=function(){return actualCoverage;};}return actualCoverage;}cov_cd469je36();/**
 *     walk
 * 
 *     Alternative of deep-copy that provides much better control during creation of immutable 
 *     copies of javascript data structures. 
 *     Library is using 'generator functions'. If support for old browsers is required, 
 *     add a polyfill for 'generators'.
 * 
 *     History notes:
 *        - Development started on March 2nd, 2022
 *        - Published on GitHub for first time: March 4th, 2022
 *        - Object callback. May 23th, 2022
 */function walk(origin,callback){cov_cd469je36().f[0]++;let type=(cov_cd469je36().s[0]++,findType(origin)),result,extend=(cov_cd469je36().s[1]++,[]),breadcrumbs=(cov_cd469je36().s[2]++,'root'),cb=(cov_cd469je36().s[3]++,readCallback(callback));cov_cd469je36().s[4]++;switch(type){case'array':cov_cd469je36().b[0][0]++;cov_cd469je36().s[5]++;result=[];cov_cd469je36().s[6]++;copyObject(origin,result,extend,cb,breadcrumbs);cov_cd469je36().s[7]++;break;case'object':cov_cd469je36().b[0][1]++;cov_cd469je36().s[8]++;result={};cov_cd469je36().s[9]++;copyObject(origin,result,extend,cb,breadcrumbs);cov_cd469je36().s[10]++;break;case'simple':cov_cd469je36().b[0][2]++;cov_cd469je36().s[11]++;return origin;}// switch type
cov_cd469je36().s[12]++;for(const plus of extend){cov_cd469je36().s[13]++;plus.next();}cov_cd469je36().s[14]++;return result;}// walk func.
function findType(x){cov_cd469je36().f[1]++;cov_cd469je36().s[15]++;if(x instanceof Array){cov_cd469je36().b[1][0]++;cov_cd469je36().s[16]++;return'array';}else{cov_cd469je36().b[1][1]++;}cov_cd469je36().s[17]++;if(typeof x==='object'){cov_cd469je36().b[2][0]++;cov_cd469je36().s[18]++;return'object';}else{cov_cd469je36().b[2][1]++;}cov_cd469je36().s[19]++;return'simple';}// findType func.
function*generateList(location,data,ex,callback,breadcrumbs){cov_cd469je36().f[2]++;cov_cd469je36().s[20]++;yield copyObject(data,location,ex,callback,breadcrumbs);}// generateList func.
function readCallback(callback){cov_cd469je36().f[3]++;let keyCallback=(cov_cd469je36().s[21]++,null),objectCallback=(cov_cd469je36().s[22]++,null);cov_cd469je36().s[23]++;if(typeof callback==='function'){cov_cd469je36().b[3][0]++;cov_cd469je36().s[24]++;keyCallback=callback;}else{cov_cd469je36().b[3][1]++;cov_cd469je36().s[25]++;if(callback instanceof Array){cov_cd469je36().b[4][0]++;cov_cd469je36().s[26]++;keyCallback=callback[0];cov_cd469je36().s[27]++;objectCallback=callback[1];}else{cov_cd469je36().b[4][1]++;}}cov_cd469je36().s[28]++;return[keyCallback,objectCallback];}// readCallback func.
function copyObject(obj,result,extend,callback,breadcrumbs){cov_cd469je36().f[4]++;let resource=(cov_cd469je36().s[29]++,obj),[keyCallback,objectCallback]=(cov_cd469je36().s[30]++,callback);let keys=(cov_cd469je36().s[31]++,Object.keys(resource));cov_cd469je36().s[32]++;keys.forEach(k=>{cov_cd469je36().f[5]++;let type=(cov_cd469je36().s[33]++,findType(resource[k])),item=(cov_cd469je36().s[34]++,resource[k]);cov_cd469je36().s[35]++;if((cov_cd469je36().b[6][0]++,type!=='simple')&&(cov_cd469je36().b[6][1]++,objectCallback)){cov_cd469je36().b[5][0]++;cov_cd469je36().s[36]++;item=objectCallback(item,k,`${breadcrumbs}/${k}`);cov_cd469je36().s[37]++;if(item==null){cov_cd469je36().b[7][0]++;cov_cd469je36().s[38]++;return;}else{cov_cd469je36().b[7][1]++;}cov_cd469je36().s[39]++;type=findType(item);}else{cov_cd469je36().b[5][1]++;}cov_cd469je36().s[40]++;if(type==='simple'){cov_cd469je36().b[8][0]++;cov_cd469je36().s[41]++;if(!keyCallback){cov_cd469je36().b[9][0]++;cov_cd469je36().s[42]++;result[k]=item;cov_cd469je36().s[43]++;return;}else{cov_cd469je36().b[9][1]++;}let keyRes=(cov_cd469je36().s[44]++,keyCallback(item,k,`${breadcrumbs}/${k}`));cov_cd469je36().s[45]++;if(keyRes==null){cov_cd469je36().b[10][0]++;cov_cd469je36().s[46]++;return;}else{cov_cd469je36().b[10][1]++;}cov_cd469je36().s[47]++;result[k]=keyRes;}else{cov_cd469je36().b[8][1]++;}const resultIsArray=(cov_cd469je36().s[48]++,findType(result)==='array'),keyNumber=(cov_cd469je36().s[49]++,!isNaN(k));cov_cd469je36().s[50]++;if(type==='object'){cov_cd469je36().b[11][0]++;const newObject=(cov_cd469je36().s[51]++,{});cov_cd469je36().s[52]++;if((cov_cd469je36().b[13][0]++,resultIsArray)&&(cov_cd469je36().b[13][1]++,keyNumber)){cov_cd469je36().b[12][0]++;cov_cd469je36().s[53]++;result.push(newObject);}else{cov_cd469je36().b[12][1]++;cov_cd469je36().s[54]++;result[k]=newObject;}cov_cd469je36().s[55]++;extend.push(generateList(newObject,item,extend,callback,`${breadcrumbs}/${k}`));}else{cov_cd469je36().b[11][1]++;}cov_cd469je36().s[56]++;if(type==='array'){cov_cd469je36().b[14][0]++;const newArray=(cov_cd469je36().s[57]++,[]);cov_cd469je36().s[58]++;if((cov_cd469je36().b[16][0]++,resultIsArray)&&(cov_cd469je36().b[16][1]++,keyNumber)){cov_cd469je36().b[15][0]++;cov_cd469je36().s[59]++;result.push(newArray);}else{cov_cd469je36().b[15][1]++;cov_cd469je36().s[60]++;result[k]=newArray;}cov_cd469je36().s[61]++;extend.push(generateList(newArray,item,extend,callback,`${breadcrumbs}/${k}`));}else{cov_cd469je36().b[14][1]++;}});}// copyObject func.
cov_cd469je36().s[62]++;module.exports=walk;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ3YWxrIiwib3JpZ2luIiwiY2FsbGJhY2siLCJ0eXBlIiwiZmluZFR5cGUiLCJyZXN1bHQiLCJleHRlbmQiLCJicmVhZGNydW1icyIsImNiIiwicmVhZENhbGxiYWNrIiwiY29weU9iamVjdCIsInBsdXMiLCJuZXh0IiwieCIsIkFycmF5IiwiZ2VuZXJhdGVMaXN0IiwibG9jYXRpb24iLCJkYXRhIiwiZXgiLCJrZXlDYWxsYmFjayIsIm9iamVjdENhbGxiYWNrIiwib2JqIiwicmVzb3VyY2UiLCJrZXlzIiwiT2JqZWN0IiwiZm9yRWFjaCIsImsiLCJpdGVtIiwia2V5UmVzIiwicmVzdWx0SXNBcnJheSIsImtleU51bWJlciIsImlzTmFOIiwibmV3T2JqZWN0IiwicHVzaCIsIm5ld0FycmF5IiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbIm1haW4uanMiXSwic291cmNlc0NvbnRlbnQiOlsiXG4vKipcbiAqICAgICB3YWxrXG4gKiBcbiAqICAgICBBbHRlcm5hdGl2ZSBvZiBkZWVwLWNvcHkgdGhhdCBwcm92aWRlcyBtdWNoIGJldHRlciBjb250cm9sIGR1cmluZyBjcmVhdGlvbiBvZiBpbW11dGFibGUgXG4gKiAgICAgY29waWVzIG9mIGphdmFzY3JpcHQgZGF0YSBzdHJ1Y3R1cmVzLiBcbiAqICAgICBMaWJyYXJ5IGlzIHVzaW5nICdnZW5lcmF0b3IgZnVuY3Rpb25zJy4gSWYgc3VwcG9ydCBmb3Igb2xkIGJyb3dzZXJzIGlzIHJlcXVpcmVkLCBcbiAqICAgICBhZGQgYSBwb2x5ZmlsbCBmb3IgJ2dlbmVyYXRvcnMnLlxuICogXG4gKiAgICAgSGlzdG9yeSBub3RlczpcbiAqICAgICAgICAtIERldmVsb3BtZW50IHN0YXJ0ZWQgb24gTWFyY2ggMm5kLCAyMDIyXG4gKiAgICAgICAgLSBQdWJsaXNoZWQgb24gR2l0SHViIGZvciBmaXJzdCB0aW1lOiBNYXJjaCA0dGgsIDIwMjJcbiAqICAgICAgICAtIE9iamVjdCBjYWxsYmFjay4gTWF5IDIzdGgsIDIwMjJcbiAqL1xuXG5cbiBmdW5jdGlvbiB3YWxrICggb3JpZ2luLCBjYWxsYmFjayApIHtcbiAgICBsZXQgXG4gICAgICAgICAgdHlwZSA9IGZpbmRUeXBlICggb3JpZ2luIClcbiAgICAgICAgLCByZXN1bHRcbiAgICAgICAgLCBleHRlbmQgPSBbXVxuICAgICAgICAsIGJyZWFkY3J1bWJzID0gJ3Jvb3QnXG4gICAgICAgICwgY2IgPSByZWFkQ2FsbGJhY2sgKCBjYWxsYmFjayApXG4gICAgICAgIDtcbiAgICBzd2l0Y2ggKCB0eXBlICkge1xuICAgICAgICAgICAgY2FzZSAnYXJyYXknICA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IFtdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcHlPYmplY3QgKCBvcmlnaW4sIHJlc3VsdCwgZXh0ZW5kLCBjYiwgYnJlYWRjcnVtYnMgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgY2FzZSAnb2JqZWN0JyA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHt9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcHlPYmplY3QgKCBvcmlnaW4sIHJlc3VsdCwgZXh0ZW5kLCBjYiwgYnJlYWRjcnVtYnMgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgY2FzZSAnc2ltcGxlJyA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvcmlnaW5cbiAgICAgICAgfSAvLyBzd2l0Y2ggdHlwZVxuICAgIGZvciAoIGNvbnN0IHBsdXMgb2YgZXh0ZW5kICkgeyAgIHBsdXMubmV4dCgpIH1cbiAgICByZXR1cm4gcmVzdWx0XG59IC8vIHdhbGsgZnVuYy5cblxuXG5cbmZ1bmN0aW9uIGZpbmRUeXBlICggeCApIHtcbiAgICBpZiAoIHggaW5zdGFuY2VvZiBBcnJheSAgICAgICAgICAgICkgcmV0dXJuICdhcnJheSdcbiAgICBpZiAoIHR5cGVvZiB4ID09PSAnb2JqZWN0JyAgICAgICAgICkgcmV0dXJuICdvYmplY3QnXG4gICAgcmV0dXJuICdzaW1wbGUnXG4gfSAvLyBmaW5kVHlwZSBmdW5jLlxuXG5cblxuZnVuY3Rpb24qIGdlbmVyYXRlTGlzdCAoIGxvY2F0aW9uLCBkYXRhLCBleCwgY2FsbGJhY2ssIGJyZWFkY3J1bWJzICkge1xuICAgIHlpZWxkIGNvcHlPYmplY3QgKCBkYXRhICwgbG9jYXRpb24sIGV4LCBjYWxsYmFjaywgYnJlYWRjcnVtYnMgKSAgXG59IC8vIGdlbmVyYXRlTGlzdCBmdW5jLlxuXG5cblxuZnVuY3Rpb24gcmVhZENhbGxiYWNrICggY2FsbGJhY2sgKSB7XG4gICAgbGV0IFxuICAgICAgICAgIGtleUNhbGxiYWNrID0gbnVsbFxuICAgICAgICAsIG9iamVjdENhbGxiYWNrID0gbnVsbFxuICAgICAgICA7XG4gICAgaWYgKCB0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicgKSAgIGtleUNhbGxiYWNrID0gY2FsbGJhY2tcbiAgICBlbHNlIGlmICggY2FsbGJhY2sgaW5zdGFuY2VvZiBBcnJheSApIHtcbiAgICAgICAgICAgICAgICBrZXlDYWxsYmFjayA9IGNhbGxiYWNrWzBdXG4gICAgICAgICAgICAgICAgb2JqZWN0Q2FsbGJhY2sgPSBjYWxsYmFja1sxXVxuICAgICAgICB9XG4gICAgcmV0dXJuIFsga2V5Q2FsbGJhY2ssIG9iamVjdENhbGxiYWNrIF1cbn0gLy8gcmVhZENhbGxiYWNrIGZ1bmMuXG5cblxuXG5mdW5jdGlvbiBjb3B5T2JqZWN0ICggb2JqLCByZXN1bHQsIGV4dGVuZCwgY2FsbGJhY2ssIGJyZWFkY3J1bWJzICkge1xuICAgIGxldCBcbiAgICAgICAgcmVzb3VyY2UgPSBvYmpcbiAgICAgICwgWyBrZXlDYWxsYmFjaywgb2JqZWN0Q2FsbGJhY2sgXSA9IGNhbGxiYWNrXG4gICAgICA7XG5cbiAgICBsZXQga2V5cyA9IE9iamVjdC5rZXlzICggcmVzb3VyY2UgKTtcbiAgICBrZXlzLmZvckVhY2ggKCBrID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IFxuICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlID0gZmluZFR5cGUocmVzb3VyY2Vba10pXG4gICAgICAgICAgICAgICAgICAgICAgICAsIGl0ZW0gID0gcmVzb3VyY2Vba11cbiAgICAgICAgICAgICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCB0eXBlICE9PSAnc2ltcGxlJyAmJiBvYmplY3RDYWxsYmFjayApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtID0gb2JqZWN0Q2FsbGJhY2sgKCBpdGVtLCBrLCBgJHticmVhZGNydW1ic30vJHtrfWAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggaXRlbSA9PSBudWxsICkgICByZXR1cm5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlID0gZmluZFR5cGUgKCBpdGVtIClcbiAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmICggdHlwZSA9PT0gJ3NpbXBsZScgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoICFrZXlDYWxsYmFjayApIHsgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRba10gPSBpdGVtXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBrZXlSZXMgPSBrZXlDYWxsYmFjayAoIGl0ZW0sIGssIGAke2JyZWFkY3J1bWJzfS8ke2t9YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGtleVJlcyA9PSBudWxsICkgICByZXR1cm5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFtrXSA9IGtleVJlc1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0SXNBcnJheSA9IChmaW5kVHlwZSAocmVzdWx0KSA9PT0gJ2FycmF5JykgXG4gICAgICAgICAgICAgICAgICAgICAgICAsIGtleU51bWJlciA9ICFpc05hTiAoIGsgKVxuICAgICAgICAgICAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIHR5cGUgPT09ICdvYmplY3QnICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld09iamVjdCA9IHt9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggcmVzdWx0SXNBcnJheSAmJiBrZXlOdW1iZXIgKSAgIHJlc3VsdC5wdXNoICggbmV3T2JqZWN0IClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRba10gPSBuZXdPYmplY3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHRlbmQucHVzaCAoIGdlbmVyYXRlTGlzdCAoIG5ld09iamVjdCwgaXRlbSwgZXh0ZW5kLCBjYWxsYmFjaywgYCR7YnJlYWRjcnVtYnN9LyR7a31gICkgICApXG4gICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKCB0eXBlID09PSAnYXJyYXknICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0FycmF5ID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCByZXN1bHRJc0FycmF5ICYmIGtleU51bWJlciApICAgcmVzdWx0LnB1c2ggKCBuZXdBcnJheSApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0W2tdID0gbmV3QXJyYXlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHRlbmQucHVzaCAoIGdlbmVyYXRlTGlzdCggbmV3QXJyYXksIGl0ZW0sIGV4dGVuZCwgY2FsbGJhY2ssIGAke2JyZWFkY3J1bWJzfS8ke2t9YCApICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbn0gLy8gY29weU9iamVjdCBmdW5jLlxuXG5cblxubW9kdWxlLmV4cG9ydHMgPSB3YWxrXG5cblxuIl0sIm1hcHBpbmdzIjoiKzZSQWVZO3lGQWRaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBR0MsUUFBU0EsS0FBVCxDQUFnQkMsTUFBaEIsQ0FBd0JDLFFBQXhCLENBQW1DLHdCQUNoQyxHQUNNQyxLQUFJLHlCQUFHQyxRQUFRLENBQUdILE1BQUgsQ0FBWCxDQURWLENBRU1JLE1BRk4sQ0FHTUMsTUFBTSx5QkFBRyxFQUFILENBSFosQ0FJTUMsV0FBVyx5QkFBRyxNQUFILENBSmpCLENBS01DLEVBQUUseUJBQUdDLFlBQVksQ0FBR1AsUUFBSCxDQUFmLENBTFIsQ0FEZ0MsdUJBUWhDLE9BQVNDLElBQVQsRUFDUSxJQUFLLE9BQUwsa0RBQ29CRSxNQUFNLENBQUcsRUFBVCxDQURwQix1QkFFb0JLLFVBQVUsQ0FBR1QsTUFBSCxDQUFXSSxNQUFYLENBQW1CQyxNQUFuQixDQUEyQkUsRUFBM0IsQ0FBK0JELFdBQS9CLENBQVYsQ0FGcEIsdUJBR29CLE1BQ3BCLElBQUssUUFBTCxrREFDb0JGLE1BQU0sQ0FBRyxFQUFULENBRHBCLHVCQUVvQkssVUFBVSxDQUFHVCxNQUFILENBQVdJLE1BQVgsQ0FBbUJD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